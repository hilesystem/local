import*as e from"fs";import{promises as r,constants as i}from"fs";import{ofError as t,of as n}from"@r37r0m0d3l/of";import a,{resolve as s,extname as o,parse as c,basename as f,dirname as l,join as u}from"path";import d from"assert";async function createDirectory(e,i="0777",n=!0){const a=await t(r.mkdir(e,{mode:i,recursive:n}));return a||!0}async function getStatus(e){return n(r.stat(e))}async function writeFile(e,i,n){const a=await t(r.writeFile(e,i,n));return a||!0}async function createFile(e,i="0777"){const[n,s]=await getStatus(e);if(!s&&n.isFile())return!0;const o=a.dirname(e);if(s&&"ENOENT"===s.code){const r=await createDirectory(o,i);if(!0!==r)return r;const t=await writeFile(e,"",{mode:i,flag:"w"});return!0===t||t}return n.isDirectory()?await writeFile(e,"",{mode:i,flag:"w"}):await t(r.readdir(o))}async function accessWrapper(e,i){const n=await t(r.access(i,e));return n||!0}async function dirIsExecutable(e){return accessWrapper(i.X_OK,e)}async function dirIsReadable(e){return accessWrapper(i.R_OK,e)}async function dirIsVisible(e){return accessWrapper(i.F_OK,e)}async function dirIsWritable(e){return accessWrapper(i.W_OK,e)}async function fileIsExecutable(e){return accessWrapper(i.X_OK,e)}async function fileIsReadable(e){return accessWrapper(i.R_OK,e)}async function fileIsVisible(e){return accessWrapper(i.F_OK,e)}async function fileIsWritable(e){return accessWrapper(i.W_OK,e)}async function fileTruncate(e,i=0){const n=await t(r.truncate(e,i));return n||!0}function absolutePathFrom(e,...r){let i;return i=Array.isArray(e)?e.map(e=>e.toString()):[e.toString()],r.length&&(i=i.concat(r.map(e=>e.toString()))),s(...i)}function fileExtension(e){return o(e).substring(1)}function fileName(e){return c(e).name}function fileNameExt(e){return f(e)}function filePath(e){return l(e)}function pathFrom(e,...r){let i;return i=Array.isArray(e)?e.map(e=>e.toString()):[e.toString()],r.length&&(i=i.concat(r.map(e=>e.toString()))),u(...i)}async function readFileToBase64(e){const[i,t]=await n(r.readFile(e,"base64"));return t||i.toString()}async function readFileToBuffer(e){const[i,t]=await n(r.readFile(e,"binary"));return t||Buffer.from(i)}async function readFileToString(e){const[i,t]=await n(r.readFile(e,"utf8"));return t||i.toString()}const m="win32"===process.platform;function rimraf(r,i,t){let n=0,a=t,s=i;"function"==typeof s&&(a=s,s={}),d(r,"remove(): missing path"),d.strictEqual(typeof r,"string","remove(): path should be a string"),d.strictEqual(typeof a,"function","remove(): callback function required"),d(s,"remove(): invalid options argument provided"),d.strictEqual(typeof s,"object","remove(): options should be object"),function defaults(r){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(i=>{r[i]=r[i]||e[i]}),r.maxBusyTries=r.maxBusyTries||3}(s),rimraf_(r,s,(function callbackRimraf(e){if(e){if(("EBUSY"===e.code||"ENOTEMPTY"===e.code||"EPERM"===e.code)&&n<s.maxBusyTries){n++;return void setTimeout(()=>rimraf_(r,s,callbackRimraf),100*n)}if("ENOENT"===e.code)return void a(null)}a(e)}))}function rimraf_(e,r,i){d(e),d(r),d("function"==typeof i),r.lstat(e,(t,n)=>t&&"ENOENT"===t.code?i(null):t&&"EPERM"===t.code&&m?fixWinEPERM(e,r,t,i):n&&n.isDirectory()?rmdir(e,r,t,i):void r.unlink(e,t=>{if(t){if("ENOENT"===t.code)return i(null);if("EPERM"===t.code)return m?fixWinEPERM(e,r,t,i):rmdir(e,r,t,i);if("EISDIR"===t.code)return rmdir(e,r,t,i)}return i(t)}))}function fixWinEPERM(e,r,i,t){return d(e),d(r),d("function"==typeof t),i&&d(i instanceof Error),r.chmod(e,438,n=>{n?"ENOENT"===n.code?t(null):t(i):r.stat(e,(n,a)=>{n?"ENOENT"===n.code?t(null):t(i):a.isDirectory()?rmdir(e,r,i,t):r.unlink(e,t)})}),null}function rmdir(e,r,i,t){return d(e),d(r),i&&d(i instanceof Error),d("function"==typeof t),r.rmdir(e,n=>{!n||"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code?n&&"ENOTDIR"===n.code?t(i):t(n):function removeSubPath(e,r,i){d(e),d(r),d("function"==typeof i),r.readdir(e,(t,n)=>{if(t)return i(t);let s,o=n.length;if(0===o)return r.rmdir(e,i);n.forEach(t=>{rimraf(a.join(e,t),r,t=>{s||(t?i(s=t):(--o,0===o&&r.rmdir(e,i)))})})})}(e,r,t)}),null}async function remove(e){return new Promise((r,i)=>{rimraf(e,{},e=>{e?i(e):r()})})}function removeNonBlocking(e){remove(e).then(()=>{}).catch(()=>{})}async function isDirExists(e){const[r,i]=await getStatus(e);return!i&&r.isDirectory()}async function isFileExists(e){const[r,i]=await getStatus(e);return!i&&r.isFile()}async function isPathExists(e){const[r]=await getStatus(e);return Boolean(r)}async function writeJSON(e,r,i){let t;try{t=JSON.stringify(r)}catch(e){return e}return writeFile(e,t,i)}function _defineProperty(e,r,i){return r in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}class HileSystemLocal{constructor(){_defineProperty(this,"absolutePathFrom",absolutePathFrom),_defineProperty(this,"createDirectory",createDirectory),_defineProperty(this,"createFile",createFile),_defineProperty(this,"dirIsExecutable",dirIsExecutable),_defineProperty(this,"dirIsReadable",dirIsReadable),_defineProperty(this,"dirIsVisible",dirIsVisible),_defineProperty(this,"dirIsWritable",dirIsWritable),_defineProperty(this,"getStatus",getStatus),_defineProperty(this,"isDirExists",isDirExists),_defineProperty(this,"isFileExists",isFileExists),_defineProperty(this,"isPathExists",isPathExists),_defineProperty(this,"fileExtension",fileExtension),_defineProperty(this,"fileName",fileName),_defineProperty(this,"fileNameExt",fileNameExt),_defineProperty(this,"filePath",filePath),_defineProperty(this,"fileIsExecutable",fileIsExecutable),_defineProperty(this,"fileIsReadable",fileIsReadable),_defineProperty(this,"fileIsVisible",fileIsVisible),_defineProperty(this,"fileIsWritable",fileIsWritable),_defineProperty(this,"fileTruncate",fileTruncate),_defineProperty(this,"pathFrom",pathFrom),_defineProperty(this,"readFileToBase64",readFileToBase64),_defineProperty(this,"readFileToBuffer",readFileToBuffer),_defineProperty(this,"readFileToString",readFileToString),_defineProperty(this,"remove",remove),_defineProperty(this,"removeNonBlocking",removeNonBlocking),_defineProperty(this,"writeFile",writeFile),_defineProperty(this,"writeJSON",writeJSON)}}export{HileSystemLocal,absolutePathFrom,createDirectory,createFile,dirIsExecutable,dirIsReadable,dirIsVisible,dirIsWritable,fileExtension,fileIsExecutable,fileIsReadable,fileIsVisible,fileIsWritable,fileName,fileNameExt,filePath,fileTruncate,getStatus,isDirExists,isFileExists,isPathExists,pathFrom,readFileToBase64,readFileToBuffer,readFileToString,remove,removeNonBlocking,writeFile,writeJSON};
//# sourceMappingURL=index.mjs.map
