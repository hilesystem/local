import*as e from"fs";import{promises as t,constants as i}from"fs";import{ofError as r,of as n}from"@r37r0m0d3l/of";import s,{resolve as a,extname as o,parse as c,basename as f,dirname as l,join as u}from"path";import d from"assert";async function createDirectory(e,i="0777",n=!0){const s=await r(t.mkdir(e,{mode:i,recursive:n}));return s||!0}async function getStatus(e){return n(t.stat(e))}async function writeFile(e,i,n){const s=await r(t.writeFile(e,i,n));return s||!0}async function createFile(e,i="0777"){const[n,a]=await getStatus(e);if(!a&&n.isFile())return!0;const o=s.dirname(e);if(a&&"ENOENT"===a.code){const t=await createDirectory(o,i);if(!0!==t)return t;const r=await writeFile(e,"",{mode:i,flag:"w"});return!0===r||r}return n.isDirectory()?await writeFile(e,"",{mode:i,flag:"w"}):await r(t.readdir(o))}async function accessWrapper(e,i){const n=await r(t.access(i,e));return n||!0}async function dirIsExecutable(e){return accessWrapper(i.X_OK,e)}async function dirIsReadable(e){return accessWrapper(i.R_OK,e)}async function dirIsVisible(e){return accessWrapper(i.F_OK,e)}async function dirIsWritable(e){return accessWrapper(i.W_OK,e)}async function fileIsExecutable(e){return accessWrapper(i.X_OK,e)}async function fileIsReadable(e){return accessWrapper(i.R_OK,e)}async function fileIsVisible(e){return accessWrapper(i.F_OK,e)}async function fileIsWritable(e){return accessWrapper(i.W_OK,e)}async function fileTruncate(e,i=0){const n=await r(t.truncate(e,i));return n||!0}function absolutePathFrom(e,...t){let i;return i=Array.isArray(e)?e.map(e=>e.toString()):[e.toString()],t.length&&(i=i.concat(t.map(e=>e.toString()))),a(...i)}function fileExtension(e){return o(e).substring(1)}function fileName(e){return c(e).name}function fileNameExt(e){return f(e)}function filePath(e){return l(e)}function pathFrom(e,...t){let i;return i=Array.isArray(e)?e.map(e=>e.toString()):[e.toString()],t.length&&(i=i.concat(t.map(e=>e.toString()))),u(...i)}const m="win32"===process.platform;function rimraf(t,i,r){let n=0;"function"==typeof i&&(r=i,i={}),d(t,"remove(): missing path"),d.strictEqual(typeof t,"string","remove(): path should be a string"),d.strictEqual(typeof r,"function","remove(): callback function required"),d(i,"remove(): invalid options argument provided"),d.strictEqual(typeof i,"object","remove(): options should be object"),function defaults(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(i=>{t[i]=t[i]||e[i]}),t.maxBusyTries=t.maxBusyTries||3}(i),rimraf_(t,i,(function callbackRimraf(e){if(e){if(("EBUSY"===e.code||"ENOTEMPTY"===e.code||"EPERM"===e.code)&&n<i.maxBusyTries){n++;return setTimeout(()=>rimraf_(t,i,callbackRimraf),100*n)}"ENOENT"===e.code&&(e=null)}r(e)}))}function rimraf_(e,t,i){d(e),d(t),d("function"==typeof i),t.lstat(e,(r,n)=>r&&"ENOENT"===r.code?i(null):r&&"EPERM"===r.code&&m?fixWinEPERM(e,t,r,i):n&&n.isDirectory()?rmdir(e,t,r,i):void t.unlink(e,r=>{if(r){if("ENOENT"===r.code)return i(null);if("EPERM"===r.code)return m?fixWinEPERM(e,t,r,i):rmdir(e,t,r,i);if("EISDIR"===r.code)return rmdir(e,t,r,i)}return i(r)}))}function fixWinEPERM(e,t,i,r){d(e),d(t),d("function"==typeof r),i&&d(i instanceof Error),t.chmod(e,438,n=>{n?r("ENOENT"===n.code?null:i):t.stat(e,(n,s)=>{n?r("ENOENT"===n.code?null:i):s.isDirectory()?rmdir(e,t,i,r):t.unlink(e,r)})})}function rmdir(e,t,i,r){d(e),d(t),i&&d(i instanceof Error),d("function"==typeof r),t.rmdir(e,n=>{!n||"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code?n&&"ENOTDIR"===n.code?r(i):r(n):function removeSubPath(e,t,i){d(e),d(t),d("function"==typeof i),t.readdir(e,(r,n)=>{if(r)return i(r);let a,o=n.length;if(0===o)return t.rmdir(e,i);n.forEach(r=>{rimraf(s.join(e,r),t,r=>{if(!a)return r?i(a=r):void(0==--o&&t.rmdir(e,i))})})})}(e,t,r)})}async function remove(e){return new Promise((t,i)=>{rimraf(e,{},e=>{e?i(e):t()})})}async function isDirExists(e){const[t,i]=await getStatus(e);return!i&&t.isDirectory()}async function isFileExists(e){const[t,i]=await getStatus(e);return!i&&t.isFile()}async function isPathExists(e){const[t]=await getStatus(e);return Boolean(t)}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class HileSystemLocal{constructor(){_defineProperty(this,"absolutePathFrom",absolutePathFrom),_defineProperty(this,"createDirectory",createDirectory),_defineProperty(this,"createFile",createFile),_defineProperty(this,"dirIsExecutable",dirIsExecutable),_defineProperty(this,"dirIsReadable",dirIsReadable),_defineProperty(this,"dirIsVisible",dirIsVisible),_defineProperty(this,"dirIsWritable",dirIsWritable),_defineProperty(this,"getStatus",getStatus),_defineProperty(this,"isDirExists",isDirExists),_defineProperty(this,"isFileExists",isFileExists),_defineProperty(this,"isPathExists",isPathExists),_defineProperty(this,"fileExtension",fileExtension),_defineProperty(this,"fileName",fileName),_defineProperty(this,"fileNameExt",fileNameExt),_defineProperty(this,"filePath",filePath),_defineProperty(this,"fileIsExecutable",fileIsExecutable),_defineProperty(this,"fileIsReadable",fileIsReadable),_defineProperty(this,"fileIsVisible",fileIsVisible),_defineProperty(this,"fileIsWritable",fileIsWritable),_defineProperty(this,"fileTruncate",fileTruncate),_defineProperty(this,"pathFrom",pathFrom),_defineProperty(this,"remove",remove),_defineProperty(this,"writeFile",writeFile)}}export{HileSystemLocal,absolutePathFrom,createDirectory,createFile,dirIsExecutable,dirIsReadable,dirIsVisible,dirIsWritable,fileExtension,fileIsExecutable,fileIsReadable,fileIsVisible,fileIsWritable,fileName,fileNameExt,filePath,fileTruncate,getStatus,isDirExists,isFileExists,isPathExists,pathFrom,remove,writeFile};
//# sourceMappingURL=index.mjs.map
