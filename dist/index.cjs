"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("fs"),t=require("@r37r0m0d3l/of"),i=require("path"),r=_interopDefault(i),s=_interopDefault(require("assert"));async function createDirectory(i,r="0777",s=!0){const n=await t.ofError(e.promises.mkdir(i,{mode:r,recursive:s}));return n||!0}async function getStatus(i){return t.of(e.promises.stat(i))}async function writeFile(i,r,s){const n=await t.ofError(e.promises.writeFile(i,r,s));return n||!0}async function createFile(i,s="0777"){const[n,a]=await getStatus(i);if(!a&&n.isFile())return!0;const o=r.dirname(i);if(a&&"ENOENT"===a.code){const e=await createDirectory(o,s);if(!0!==e)return e;const t=await writeFile(i,"",{mode:s,flag:"w"});return!0===t||t}return n.isDirectory()?await writeFile(i,"",{mode:s,flag:"w"}):await t.ofError(e.promises.readdir(o))}async function accessWrapper(i,r){const s=await t.ofError(e.promises.access(r,i));return s||!0}async function dirIsExecutable(t){return accessWrapper(e.constants.X_OK,t)}async function dirIsReadable(t){return accessWrapper(e.constants.R_OK,t)}async function dirIsVisible(t){return accessWrapper(e.constants.F_OK,t)}async function dirIsWritable(t){return accessWrapper(e.constants.W_OK,t)}async function fileIsExecutable(t){return accessWrapper(e.constants.X_OK,t)}async function fileIsReadable(t){return accessWrapper(e.constants.R_OK,t)}async function fileIsVisible(t){return accessWrapper(e.constants.F_OK,t)}async function fileIsWritable(t){return accessWrapper(e.constants.W_OK,t)}async function fileTruncate(i,r=0){const s=await t.ofError(e.promises.truncate(i,r));return s||!0}function fileExtension(e){return i.extname(e).substring(1)}function fileName(e){return i.parse(e).name}function fileNameExt(e){return i.basename(e)}function filePath(e){return i.dirname(e)}const n="win32"===process.platform;function rimraf(t,i,r){let n=0;"function"==typeof i&&(r=i,i={}),s(t,"remove(): missing path"),s.strictEqual(typeof t,"string","remove(): path should be a string"),s.strictEqual(typeof r,"function","remove(): callback function required"),s(i,"remove(): invalid options argument provided"),s.strictEqual(typeof i,"object","remove(): options should be object"),function defaults(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(i=>{t[i]=t[i]||e[i]}),t.maxBusyTries=t.maxBusyTries||3}(i),rimraf_(t,i,(function callbackRimraf(e){if(e){if(("EBUSY"===e.code||"ENOTEMPTY"===e.code||"EPERM"===e.code)&&n<i.maxBusyTries){return n++,setTimeout(()=>rimraf_(t,i,callbackRimraf),100*n)}"ENOENT"===e.code&&(e=null)}r(e)}))}function rimraf_(e,t,i){s(e),s(t),s("function"==typeof i),t.lstat(e,(r,s)=>r&&"ENOENT"===r.code?i(null):r&&"EPERM"===r.code&&n?fixWinEPERM(e,t,r,i):s&&s.isDirectory()?rmdir(e,t,r,i):void t.unlink(e,r=>{if(r){if("ENOENT"===r.code)return i(null);if("EPERM"===r.code)return n?fixWinEPERM(e,t,r,i):rmdir(e,t,r,i);if("EISDIR"===r.code)return rmdir(e,t,r,i)}return i(r)}))}function fixWinEPERM(e,t,i,r){s(e),s(t),s("function"==typeof r),i&&s(i instanceof Error),t.chmod(e,438,s=>{s?r("ENOENT"===s.code?null:i):t.stat(e,(s,n)=>{s?r("ENOENT"===s.code?null:i):n.isDirectory()?rmdir(e,t,i,r):t.unlink(e,r)})})}function rmdir(e,t,i,n){s(e),s(t),i&&s(i instanceof Error),s("function"==typeof n),t.rmdir(e,a=>{!a||"ENOTEMPTY"!==a.code&&"EEXIST"!==a.code&&"EPERM"!==a.code?a&&"ENOTDIR"===a.code?n(i):n(a):function removeSubPath(e,t,i){s(e),s(t),s("function"==typeof i),t.readdir(e,(s,n)=>{if(s)return i(s);let a,o=n.length;if(0===o)return t.rmdir(e,i);n.forEach(s=>{rimraf(r.join(e,s),t,r=>{if(!a)return r?i(a=r):void(0==--o&&t.rmdir(e,i))})})})}(e,t,n)})}async function remove(e){return new Promise((t,i)=>{rimraf(e,{},e=>{e?i(e):t()})})}async function isDirExists(e){const[t,i]=await getStatus(e);return!i&&t.isDirectory()}async function isFileExists(e){const[t,i]=await getStatus(e);return!i&&t.isFile()}async function isPathExists(e){const[t]=await getStatus(e);return Boolean(t)}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}exports.HileSystemLocal=class HileSystemLocal{constructor(){_defineProperty(this,"createDirectory",createDirectory),_defineProperty(this,"createFile",createFile),_defineProperty(this,"dirIsExecutable",dirIsExecutable),_defineProperty(this,"dirIsReadable",dirIsReadable),_defineProperty(this,"dirIsVisible",dirIsVisible),_defineProperty(this,"dirIsWritable",dirIsWritable),_defineProperty(this,"getStatus",getStatus),_defineProperty(this,"isDirExists",isDirExists),_defineProperty(this,"isFileExists",isFileExists),_defineProperty(this,"isPathExists",isPathExists),_defineProperty(this,"fileExtension",fileExtension),_defineProperty(this,"fileName",fileName),_defineProperty(this,"fileNameExt",fileNameExt),_defineProperty(this,"filePath",filePath),_defineProperty(this,"fileIsExecutable",fileIsExecutable),_defineProperty(this,"fileIsReadable",fileIsReadable),_defineProperty(this,"fileIsVisible",fileIsVisible),_defineProperty(this,"fileIsWritable",fileIsWritable),_defineProperty(this,"fileTruncate",fileTruncate),_defineProperty(this,"remove",remove),_defineProperty(this,"writeFile",writeFile)}},exports.createDirectory=createDirectory,exports.createFile=createFile,exports.dirIsExecutable=dirIsExecutable,exports.dirIsReadable=dirIsReadable,exports.dirIsVisible=dirIsVisible,exports.dirIsWritable=dirIsWritable,exports.fileExtension=fileExtension,exports.fileIsExecutable=fileIsExecutable,exports.fileIsReadable=fileIsReadable,exports.fileIsVisible=fileIsVisible,exports.fileIsWritable=fileIsWritable,exports.fileName=fileName,exports.fileNameExt=fileNameExt,exports.filePath=filePath,exports.fileTruncate=fileTruncate,exports.getStatus=getStatus,exports.isDirExists=isDirExists,exports.isFileExists=isFileExists,exports.isPathExists=isPathExists,exports.remove=remove,exports.writeFile=writeFile;
//# sourceMappingURL=index.cjs.map
